services:
  app:
    image: rpungello/ytdl-sub-manager:latest
    ports:
      - "${WEB_PORT:-80}:80"
    restart: unless-stopped
    env_file: .env
  valkey:
    image: 'valkey/valkey:alpine'
    ports:
      - '${FORWARD_VALKEY_PORT:-6379}:6379'
    volumes:
      - 'valkey:/data'
    healthcheck:
      test:
        - CMD
        - valkey-cli
        - ping
      retries: 3
      timeout: 5s
volumes:
  valkey:
    driver: local
